<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>生成随机姓名</title>
    <style>
        li {
            display: inline-block;
            width: 10%
        }
    </style>
</head>

<body>
    <ul id='js-ul'> </ul>
    <script src="./面试题/js扁平化数组.js"></script>
    <script>
        let familyNames = getfamilyNames();

        // let givenNames = '子 璇 淼 国 栋 夫 瑞 堂 甜 敏 尚 贤 贺 祥 晨 涛 昊 轩 易 益 辰 帆 冉 瑾 春 昆 齐 杨 文 东 雄 霖 浩 熙 涵 溶 冰 枫 欣 宜 豪 慧 建 政 美 淑 杰 源 忠 林 榕 润 汝 嘉 新 亦 菲 洁 佳 禹 淳 泽 惠 伟 洋 越 丽 翔 华 晶 莹 凌 苒 溪 雨 怡 毅 琪 紫 昕 蕊 明 远 茜 璐 运 鑫 君 滢 莎 汕 钰 玉 晓 庆 一 鸣 语 添 池 雅 晗 清 妍 诗 悦 乐 天 赫 玥 傲 若';

        let boyWorlds = '一、杰、梁、栋、维、启、克、伦、翔、旭、鹏、泽、晨、辰、士、以、建、家、致、树、炎、盛、雄、琛、钧、冠、策、腾、楠、榕、风、航、弘、义、兴、良、飞、彬、富、和、鸣、朋、斌、行、时、泰、博、磊、民、友、志、清、坚、庆、若、德、彪、伟、刚、勇、毅、俊、峰、强、军、平、保、东、文、辉、力、明、永、健、世、广、海、山、仁、波、宁、福、生、龙、元、全、国、胜、学、祥、才、发、武、新、利、顺、信、子、杰、涛、昌、成、康、星、光、天、达、安、岩、中、茂、进、林、有、诚、先、敬、震、振、壮、会、思、群、豪、心、邦、承、乐、绍、功、松、善、厚、裕、河、哲、江、超、浩、亮、政、谦、亨、奇、固、之、轮、翰、朗、伯、宏、言';
        boyWorlds = boyWorlds.split('、');

        let girlWordls = getGirlWordls();

        function getfamilyNames() {
            let result = [];
            let familyNamesData = [
                { counts: 1, title: '百家姓', familyNames: '赵 钱 孙 李 周 吴 郑 王 冯 陈 褚 卫 蒋 沈 韩 杨 朱 秦 尤 许 何 吕 施 张 孔 曹 严 华 金 魏 陶 姜 戚 谢 邹 喻 柏 水 窦 章 云 苏 潘 葛 奚 范 彭 郎 鲁 韦 昌 马 苗 凤 花 方 俞 任 袁 柳 酆 鲍 史 唐 费 廉 岑 薛 雷 贺 倪 汤 滕 殷 罗 毕 郝 邬 安 常 乐 于 时 傅 皮 卞 齐 康 伍 余 元 卜 顾 孟 平 黄 和 穆 萧 尹 姚 邵 湛 汪 祁 毛 禹 狄 米 贝 明 臧 计 伏 成 戴 谈 宋 茅 庞 熊 纪 舒 屈 项 祝 董 梁 杜 蓝 闵 席 季 麻 强 贾 路 娄 危 江 童 颜 郭' },
                { counts: 2, title: '剑来', familyNames: '李 阮 宁 陆 陈 崔 齐' }
            ];
            familyNamesData = familyNamesData.concat(autoDisposeCounts({ counts: 4, title: '2018姓排行榜', familyNames: '李 王 张 刘 陈 杨 赵 黄 周 吴 徐 孙 胡 朱 高 林 何 郭 马 罗 梁 宋 郑 谢 韩 唐 冯 于 董 萧 程 曹 袁 邓 许 傅 沈 曾 彭 吕 苏 卢 蒋 蔡 贾 丁 魏 薛 叶 阎 余 潘 杜 戴 夏 钟 汪 田 任 姜 范 方 石 姚 谭 廖 邹 熊 金 陆 郝 孔 白 崔 康 毛 邱 秦 江 史 顾 侯 邵 孟 龙 万 段 漕 钱 汤 尹 黎 易 常 武 乔 贺 赖 龚 文' }))

            familyNamesData.forEach(({ familyNames, counts }) => {
                result = [...result, ...getArrByCount((Array.isArray(familyNames) ? familyNames : familyNames.split(' ')), counts)];
            });
            console.log(result)

            return result

            function getArrByCount(arr, count) {
                if (count < 0) { count = 1; }
                let result = [];
                while (count--) {
                    result = result.concat(arr)
                }
                return result
            }

            function autoDisposeCounts({ title, familyNames }) {
                let result = [];
                const basics = 5;

                familyNames = familyNames.split(' ');

                for (
                    let i = 0, len = familyNames.length, limit = Math.ceil(len / basics), index = basics * i, from = index * i, to = (index + basics) * (i + 1);
                    from < len;
                    i++ , index = basics * i, from = index * i, to = (index + basics) * (i + 1)
                ) {
                    // console.log(Math.floor(len / (i + 1) / basics))
                    // console.log((to - from) / basics)
                    // console.log(((index + basics) * (i + 1) - index * i) / basics)
                    // console.log(((i + 1) * (i + 1)))
                    // console.log(((len / 2) - (to - from)) / basics)
                    result.push({
                        title: title + from + '-' + to,
                        counts: Math.floor(len / (i + 1) / basics),
                        familyNames: familyNames.slice(from, to)
                    })
                }

                console.log('result', result)

                return result;
            }
        }

        function getGirlWordls() {
            let arr1 = '蕊、薇、菁、梦、岚、苑、婕、馨、瑗、琰、韵、融、园、艺、咏、卿、聪、澜、纯、爽、琬、茗、羽、希、宁、欣、飘、育、滢、馥、筠、柔、竹、霭、凝、晓、欢、霄、伊、亚、宜、可、姬、舒、影、荔、枝、思、丽、芬、芳、燕、莺、媛、艳、珊、莎、蓉、眉、君、琴、毓、悦、昭、冰、枫、芸、菲、寒、锦、玲、秋、秀、娟、英、华、慧、巧、美、娜、静、淑、惠、珠、翠、雅、芝、玉、萍、红、月、彩、春、菊、兰、凤、洁、梅、琳、素、云、莲、真、环、雪、荣、爱、妹、霞、香、瑞、凡、佳、嘉、琼、勤、珍、贞、莉、桂、娣、叶、璧、璐、娅、琦、晶、妍、茜、黛、青、倩、婷、姣、婉、娴、瑾、颖、露、瑶、怡、婵、雁、蓓、纨、仪、荷、丹'
                .split('、');
            let arr2 = '萌 敏 淳 筠 柔 竹 霭 凝 晓 霄 枫 芸 菲 寒 伊 亚 宜 可 姬 舒 影 荔 枝 思 丽 秀 娟 英 华 慧 巧 美 娜 静 淑 惠 珠 翠 雅 芝 玉 萍 红 娥 玲 芬 芳 燕 彩 春 菊 勤 珍 贞 莉 兰 凤 洁 梅 琳 素 云 莲 真 环 雪 荣 爱 妹 霞 香 月 莺 媛 艳 瑞 凡 佳 嘉 琼 桂 娣 叶 璧 璐 娅 琦 晶 妍 茜 秋 珊 莎 锦 黛 青 倩 婷 姣 婉 娴 瑾 颖 露 瑶 怡 婵 雁 蓓 纨 仪 荷 丹 蓉 眉 君 琴 蕊 薇 菁 梦 岚 苑 婕 馨 瑗 琰 韵 融 园 艺 咏 卿 聪 澜 纯 毓 悦 昭 冰 爽 琬 茗 羽 希 宁 欣 飘 育 滢 馥 嘉 哲 俊 妍 乐 佳 涵 晨 宇 怡 泽 子 凡 悦 思 奕 依 浩 泓 彤 冰 媛 凯 伊 淇 淳 一 洁 茹 清 吉 源 渊 和 函 妤 宜 云 琪 菱 宣 佑 明 雄 梅 芝 英 义 淑 芬 萱'
                .split(' ');
            return Array.from(new Set([...arr1, ...arr2]));
        }

        function getRandomChats() {
            return eval('"\\u' + (Math.round(Math.random() * 20901) + 19968).toString(16) + '"');
        }

        function getRandomIndexFormNum(min = 0, max = 0) {
            return (min + Math.floor((Math.random() * Number(max - min + 1))));
        }

        function getRandomIndexByArr(arr) {
            return getRandomIndexFormNum(0, arr.length - 1)
        }

        function getRandomGiveName() {
            let names, length;
            if (Math.random() > 0.5) {
                names = girlWordls;
                obj.女名++;
            } else {
                names = boyWorlds;
                obj.男名++;
            }
            let n = getRandomIndexFormNum(1, 2);
            let name = '';
            let chart = '';
            for (let i = 0; i < n; i++) {
                // name += getRandomChats();
                chart = names[getRandomIndexByArr(names)];
                name += chart;

                obj[chart] = obj[chart] === undefined ? 1 : (obj[chart] + 1);
            }
            return name;
        }

        function getName() {
            // var i = parseInt(10 * Math.random()) * 10 + parseInt(10 * Math.random());
            var i = getRandomIndexByArr(familyNames);
            var familyName = familyNames[i];

            familyNameObj[familyName] = familyNameObj[familyName] === undefined ? 1 : (familyNameObj[familyName] + 1);

            // var j = parseInt(10 * Math.random()) * 10 + parseInt(10 * Math.random());
            // var givenName = givenNames[j];
            var givenName = getRandomGiveName();

            return familyName + givenName;
        }

        function sortObj(obj) {
            // console.log(obj)

            let newArr = new Array();
            // console.log(arr)
            for (let key in obj) {
                if (newArr[obj[key]] === undefined) {
                    newArr[obj[key]] = [key];
                } else {
                    newArr[obj[key]].push(key)
                }
            }
            // console.log('newArr', newArr)

            let setArr = Array.from(new Set(newArr));
            setArr.splice(0, 1)
            // console.log('setArr', setArr)

            newArr = myFlat(newArr);
            // console.log('newArr myFlat', newArr)

            let html = '';
            for (var i = newArr.length - 1; i >= 0; i--) {
                html += `<li>${newArr[i]} (${obj[newArr[i]]})</li>`;
            }

            return html;
        }


        var arr = [];
        var obj = { 女名: 0, 男名: 0 };
        var familyNameObj = {};

        for (let i = 0; i < 1000; i++) {
            arr.push(getName())
        }
        // console.log(arr.join(' '))
        // console.log(arr)

        let html = '';
        // let html = arr.toString();
        arr.forEach((item, index) => {
            html += `<li>${index}. ${item}</li>`;
        })

        html += sortObj(familyNameObj);
        html += sortObj(obj);
        // console.log('familyNameObj', familyNameObj)

        let $ul = document.getElementById('js-ul').innerHTML = html;
    </script>
</body>

</html>