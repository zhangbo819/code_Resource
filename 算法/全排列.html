<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>js全排列</title>
</head>

<body>
    <script>
        // 忘了在哪找的 比 LeetCode 还快, 不好理解
        // 80 ms 40 MB

        function sortAllByResult(arr, start) {
            var resArr = [];
            sortAll(arr, start, resArr);
            return resArr

            function sortAll(arr, start = 0, resArr) {
                //js全排列
                var len = arr.length;
                if (len == start) {
                    resArr.push([...arr]);
                } else {
                    for (var i = start; i < arr.length; i++) {
                        // console.log(i, start, arr)
                        swap(arr, i, start);
                        sortAll(arr, start + 1, resArr);
                        swap(arr, i, start);
                    }
                }
                function swap(arr, i, start) {
                    var temp = arr[i];
                    arr[i] = arr[start];
                    arr[start] = temp;
                }
            }
        }

        var res1 = sortAllByResult([1, 2, 3, 4])
        // 1 2 3 4
        // 0 0 [ 1, 2, 3, 4 ]
        //      1 1 [ 1, 2, 3, 4 ]
        //              2 2 [ 1, 2, 3, 4 ]
        //                      3 3 [ 1, 2, 3, 4 ]
        //              3 2 [ 1, 2, 3, 4 ]
        //                      3 3 [ 1, 2, 4, 3 ]
        //      2 1 [ 1, 2, 3, 4 ]
        //              2 2 [ 1, 3, 2, 4 ]
        //                      3 3 [ 1, 3, 2, 4 ]
        //              3 2 [ 1, 3, 2, 4 ]
        //                      3 3 [ 1, 3, 4, 2 ]
        //      3 1 [ 1, 2, 3, 4 ]
        //              2 2 [ 1, 4, 3, 2 ]
        //                      3 3 [ 1, 4, 3, 2 ]
        //              3 2 [ 1, 4, 3, 2 ]
        //                      3 3 [ 1, 4, 2, 3 ]
        // 1 0 [ 1, 2, 3, 4 ]
        //      1 1 [ 2, 1, 3, 4 ]
        //              2 2 [ 2, 1, 3, 4 ]
        //                      3 3 [ 2, 1, 3, 4 ]
        //              3 2 [ 2, 1, 3, 4 ]
        //                      3 3 [ 2, 1, 4, 3 ]
        //      2 1 [ 2, 1, 3, 4 ]
        //              2 2 [ 2, 3, 1, 4 ]
        //                      3 3 [ 2, 3, 1, 4 ]
        //              3 2 [ 2, 3, 1, 4 ]
        //                      3 3 [ 2, 3, 4, 1 ]
        //      3 1 [ 2, 1, 3, 4 ]
        //              2 2 [ 2, 4, 3, 1 ]
        //                      3 3 [ 2, 4, 3, 1 ]
        //              3 2 [ 2, 4, 3, 1 ]
        //                      3 3 [ 2, 4, 1, 3 ]
        // 2 0 [ 1, 2, 3, 4 ]
        //      1 1 [ 3, 2, 1, 4 ]
        //              2 2 [ 3, 2, 1, 4 ]
        //                      3 3 [ 3, 2, 1, 4 ]
        //              3 2 [ 3, 2, 1, 4 ]
        //                      3 3 [ 3, 2, 4, 1 ]
        //      2 1 [ 3, 2, 1, 4 ]
        //              2 2 [ 3, 1, 2, 4 ]
        //                      3 3 [ 3, 1, 2, 4 ]
        //              3 2 [ 3, 1, 2, 4 ]
        //                      3 3 [ 3, 1, 4, 2 ]
        //      3 1 [ 3, 2, 1, 4 ]
        //              2 2 [ 3, 4, 1, 2 ]
        //                      3 3 [ 3, 4, 1, 2 ]
        //              3 2 [ 3, 4, 1, 2 ]
        //                      3 3 [ 3, 4, 2, 1 ]
        // 3 0 [ 1, 2, 3, 4 ]
        //      1 1 [ 4, 2, 3, 1 ]
        //              2 2 [ 4, 2, 3, 1 ]
        //                      3 3 [ 4, 2, 3, 1 ]
        //              3 2 [ 4, 2, 3, 1 ]
        //                      3 3 [ 4, 2, 1, 3 ]
        //      2 1 [ 4, 2, 3, 1 ]
        //              2 2 [ 4, 3, 2, 1 ]
        //                      3 3 [ 4, 3, 2, 1 ]
        //              3 2 [ 4, 3, 2, 1 ]
        //                      3 3 [ 4, 3, 1, 2 ]
        //      3 1 [ 4, 2, 3, 1 ]
        //              2 2 [ 4, 1, 3, 2 ]
        //                      3 3 [ 4, 1, 3, 2 ]
        //              3 2 [ 4, 1, 3, 2 ]
        //                      3 3 [ 4, 1, 2, 3 ]

        // var res2 = sortAllByResult([5, 6, 7, 8])
        // console.log(res1, res2)

        // var resAll = [];
        // res1.forEach(i => {
        //     res2.forEach(j => {
        //         resAll.push([...i, ...j])
        //     })
        // })
        // console.log(resAll)

    </script>

    <script>
        // LeetCode 非常巧妙且易懂
        // 88 ms 40.8 MB
        // var permute = function (nums) {
        //     const res = [], path = []
        //     const used = new Array(nums.length).fill(false)

        //     const dfs = () => {
        //         if (path.length == nums.length) {
        //             res.push(path.slice())
        //             return
        //         }

        //         for (let i = 0; i < nums.length; i++) {
        //             if (used[i]) continue
        //             path.push(nums[i])
        //             used[i] = true
        //             dfs()
        //             // 回溯的过程中，将当前的节点从 path 中删除
        //             path.pop()
        //             used[i] = false
        //         }
        //     }

        //     dfs()
        //     return res
        // };
    </script>


    <script>
        // 自己一开始写的 粗糙但能通
        // 108 ms 42 MB
        // var permute = function (arr) {
        //     let res = []

        //     function one(item, rest) {
        //         let res = []

        //         for (let i = 0; i < rest.length; i++) {
        //             var arr = item === '' ? [] : [item]
        //             let r = [...rest]
        //             r.splice(i, 1)
        //             let others = one(rest[i], r)

        //             if (others.length) {
        //                 others.forEach(i => {
        //                     res.push(arr.concat(i))
        //                 })
        //             } else {
        //                 res.push(arr)
        //             }
        //         }

        //         if (!rest.length) {
        //             res.push(item)
        //         }

        //         return res
        //     }

        //     return one('', arr)
        // }
    </script>



</body>

</html>